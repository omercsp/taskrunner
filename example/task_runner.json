{
	"version": {
		"major": 0,
		"minor": 1
	},
	"definitions": {
		"cmake_build_dir": "{{CONF_PATH}}/build",
		"make": "make",
		"make_j": "{{make}} -j",
		"make_clean": "{{make}} clean"
	},
	"containers": {
		"media_builder": {
			"image": "localhost/media-builder:latest",
			"volumes": [
				"{{$HOME}}/devel:{{$HOME}}/devel"
			],
			"tty": true
		}
	},
	"tasks": {
		"make-rebuild": {
			"abstract": true,
			"short_desc": "Rebuild using make",
			"commands": ["{{make_clean}}", "{{make_j}}"]
		},
		"make": {
			"abstract": true,
			"short_desc": "Build using make",
			"commands": ["{{make_j}}"]
		},
		"cmake": {
			"abstract": true,
			"short_desc": "Run cmake in build directory",
			"cwd": "{{cmake_build_dir}}",
			"commands": ["cmake .."]
		},
		"cmake-build": {
			"abstract": true,
			"short_desc": "Run cmake build'",
			"commands": ["cmake --build {{cmake_build_dir}} -j8"]
		},
		"build": {
			"include": ["global/make"]
		},
		"rebuild": {
			"include": ["global/make-rebuild"]
		}
	},
	"default_container_tool": "/usr/bin/podman"
}

